import Controller.*;
import Model.ParkingBoy;
import Model.ParkingLot;
import View.CLI;
import View.Request;
import View.Response;

import java.util.LinkedList;
import java.util.List;

/*
 * This Java source file was generated by the Gradle 'init' task.
 */
public class App {
    public static void main(String[] args) {
	    List<ParkingLot> parkingLots = new LinkedList<>();
		parkingLots.add(new ParkingLot(1,"西南停车场",1));
	    ParkingBoy parkingBoy = new ParkingBoy(parkingLots);
        Request request = new Request();
        Response response = new Response();



	    CLI cli = new CLI();
		Router router = new Router();

		router.registerRouter("main", new MainController(request,response));
        router.registerRouter("main/*",new ErrorController(request,response));
        router.registerRouter("main/",new MainController(request,response));
        router.registerRouter("main/1",new ServerMainController(request,response));
		router.registerRouter("main/1/1",new GoToParkPageController(request,response,parkingBoy));
		router.registerRouter("main/1/1/*",new ParkController(request,response,parkingBoy));
		router.registerRouter("main/1/2",new GoToUnparkController(request,response,parkingBoy));
		router.registerRouter("main/1/2/*", new UnparkController(request,response,parkingBoy));
        router.registerRouter("main/2",new ManageMainController(request,response));
        router.registerRouter("main/2/1",new ParkingLotsInfoController(request,response,parkingBoy));
        router.registerRouter("main/2/2",new GoToAddParkinglotPageController(request,response));
        router.registerRouter("main/2/2/*",new AddParkinglotController(request,response,parkingBoy));
        router.registerRouter("main/2/3",new GoToDeleteParkinglotController(request,response,parkingBoy));
        router.registerRouter("main/2/3/*",new DeleteParkingController(request,response,parkingBoy));



        router.launch();

		while (true){
			String command = cli.input();
			request.setParameter(command);
			router.handleRequest(request);
		}
    }
}
